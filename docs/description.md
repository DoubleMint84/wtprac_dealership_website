# Информационная система автосалона (вариант 2)

# Часть 1

## Описание страниц
![Схема навигации](navigation_scheme.png)

### Шапка каждой из страниц
- Кнопка "Главная"
- Кнопка "Каталог"
- Кнопка для перехода на страницу Входа в систему и Регистрации / Кнопка перехода к личному кабинету (Dashboard для менеджера) + Кнопка выхода из аккаунта

### Главная
- Заголовок с приветствием + Фото автосалона + Контакты
- Кнопка перехода к каталогу
- Карточки 5 самых популярных машин + Скидки

### Вход в систему и Регистрация клиента
- Форма слева для ввода почты и пароля - Вход в систему. Клиент после входа попадает на Главную, менеджер - в Dashboard.
- Форма справа для ввода имени, почты, номера телефона, пароля - Регистрация клиента.

### Личный кабинет клиента
- Форма для изменения личных данных клиента (Name, Email, Address, PhoneNumber, Passport, DrivingLicense в таблице Client БД, Пароль => PasswordHash в таблице Client БД). Нажатие кнопки "Сохранить" сохраняет изменения.
- Список совершенных заказов и тест-драйвов. Нажатие кнопки "Отмена" у непереданных в производство заказов и не начатых тест-драйвов отменяет их.

### Каталог машин
- Поиск и фильтры по характеристикам автомобилей (объем двигателя, цвет, пробег и т.д.)
- Карточки автомобилей: сначала идут карточки автомобилей из автосалона, после них идут карточки всех возможных моделей и комплектаций под заказ из завода. Нажатие на карточку переводит на соответствующую страницу выбранной модели.
- Карточка состоит из фотографии автомобиля (берется из файловой системы по Id автомобиля), названий модели, марки, производителя в заголовке, названия конфигурации и года в подзаголовке, цвет машины и обивка салона в описании, цены автомобиля внизу карточки большим шрифтом. То же самое для комплектаций под заказ.

### Страница выбранной модели
- Фото автомобиля
- Название марки, модели, комплектации
- Его характеристики и цена
- Форма заявки на тест-драйв (указание даты и времени)
- Кнопка для заказа (переход на форму заказа авто)

### Форма для заказа авто
Если автомобиль под заказ из завода: 

- Выбор комплектации, дополнительных опций
- Выбор цвета и обивки кресел
- Калькулятор стоимости
- Чекбокс "Нужен ли тест-драйв?". Если да, то время назначается позже по договоренности с менеджером.
- Кнопка заказа, после чего переход в личный кабинет

Если автомобиль из автосалона:

- Стоимость машины
- Чекбокс "Нужен ли тест-драйв?". Если да, то время назначается позже по договоренности с менеджером.
- Кнопка заказа, после чего переход в личный кабинет

Если выполнен вход менеджера, то сверху будет выпадающий список для выбора клиента.

### Dashboard для менеджера
- Кнопки для перехода к страницам для менеджера

### Список заказов клиентов
- Список представляет собой таблицу, отображающую 1 к 1 таблицу Order БД. Поменять можно все значения, кроме Id, OrderDateTime, ClientId. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить заказ" (удаление записи из БД). Если в записи есть тест-драйв, то будет кнопка "Посмотреть тест-драйв" (пересылает на страницу списка заявок на тест-драйв с соответствующей фильтрацией). Иначе - кнопка "Добавить тест-драйв" (пересылает на страницу списка заявок на тест-драйв с заполненным полем "Номер заказа" в форме добавления заявки).
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Кнопка перехода в каталог для создания нового заказа

### Список заявок клиентов на тест-драйв
- Список представляет собой таблицу, отображающую 1 к 1 таблицу TestDriveSchedule БД. Поменять можно все значения, кроме Id. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить заявку" (удаление записи из БД). 
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Создание новой заявки (форма). В полях указываются все значения, соответствующие столбцам таблицы TestDriveSchedule. Кнопка "Добавить тест-драйв" сохраняет заявку в БД.

### Список автомобилей 
- Список представляет собой таблицу, отображающую 1 к 1 таблицу Car БД. Поменять можно все значения, кроме Id. Значения AdditionalClientCharacteristics (дополнительные опции автомобиля) и AdditionalCarCharacteristics (другие изменяемые характеристики) задаются в формате Json. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить автомобиль" (удаление записи из БД), "Переход к конфигурации" (пересылает на страницу списка конфигураций с соответствующей фильтрацией).
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Добавление нового автомобиля (форма). В полях указываются все значения, соответствующие столбцам таблицы Car. Кнопка "Добавить автомобиль" сохраняет автомобиль в БД.

### Список базовых комплектаций автомобилей
- Список представляет собой таблицу, отображающую 1 к 1 таблицу VehicleConfiguration БД. Поменять можно все значения, кроме Id. Значения AdditionalInfo (другие опции в конфигурации) задаются в формате Json. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить комплектацию" (удаление записи из БД), "Переход к модели" (пересылает на страницу списка моделей с единственной моделью из комплектации (фильтрация)), "Переход к автомобилям" (пересылает на страницу списка автомобилей автосалона с соответствующей фильтрацией).
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Добавление комплектаций (форма). В полях указываются все значения, соответствующие столбцам таблицы VehicleConfiguration. Кнопка "Добавить комплектацию" сохраняет комплектацию в БД.

### Список моделей
- Список представляет собой таблицу, отображающую 1 к 1 таблицу Model БД. Поменять можно все значения, кроме Id. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить модель" (удаление записи из БД), "Переход к марке" (пересылает на страницу списка марок с единственной маркой из комплектации (фильтрация)), "Переход к комплектациям" (пересылает на страницу списка комплектаций с соответствующей фильтрацией).
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Добавление модели (форма). В полях указываются все значения, соответствующие столбцам таблицы Model. Кнопка "Добавить модель" сохраняет модель в БД.

### Список марок
- Список представляет собой таблицу, отображающую 1 к 1 таблицу Brand БД. Поменять можно все значения, кроме Id. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить марку" (удаление записи из БД), "Переход к производителю" (пересылает на страницу списка производителей с единственным производителем марки (фильтрация)), "Переход к моделям" (пересылает на страницу списка моделей с соответствующей фильтрацией).
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Добавление марок (форма). В полях указываются все значения, соответствующие столбцам таблицы Brand. Кнопка "Добавить марку" сохраняет марку в БД.

### Список производителей
- Список представляет собой таблицу, отображающую 1 к 1 таблицу Manufacturer БД. Поменять можно все значения, кроме Id. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить производителя" (удаление записи из БД), "Переход к маркам" (пересылает на страницу списка марок с соответствующей фильтрацией).
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Добавление производителя (форма). В полях указываются все значения, соответствующие столбцам таблицы Manufacturer. Кнопка "Добавить производителя" сохраняет производителя в БД.

### Создание нового аккаунта менеджера
- Форма для заполнения данных нового менеджера. Поля соответствуют столбцам таблицы Manager в БД (кроме Id и PasswordHash). Указывается новый пароль аккаунта. Нажатие кнопки "Добавить" добавляет нового менеджера в БД.

### Список клиентов
- Список представляет собой таблицу, отображающую 1 к 1 таблицу Client БД. Поменять можно все значения, кроме Id и PasswordHash. В каждой строке есть кнопки "Сохранить изменения" (сохранение изменений), "Удалить клиента" (удаление записи из БД), "Посмотреть заказы клиента" (пересылает на страницу списка заказов с соответствующей фильтрацией).
- Для каждого столбца можно настроить фильтрацию в заголовке таблицы (числовой интервал или определенные текстовые значения, и т.д.).
- Добавление нового клиента (форма как в странице Входа в систему/Регистрации).

## Описание use cases/сценариев использования

### Клиент

Клиент заходит на сайт и попадает на главную страницу сайта. Оттуда он может попасть в форму входа/регистрации, зайти в каталог автомобилей, смотреть по поиску и фильтрам доступные в автосалоне машины и доступные комплектации для заказа из автосалона. Выбрав автомобиль, клиент нажимает на карточку автомобиля, смотрит на характеристики, цену, пробег и последнее ТО.

Клиент может подать заявку на тест-драйв (если указаны все необходимые документы в профиле), после чего менеджер может подтвердить заявку на странице списка заявок на тест-драйв.

Клиент, если ему понравилась модель, может перейти на форму заказа, где он указывает цвет автомобиля, обивку салона и дополнительные опции (если автомобиль под заказ), после чего он нажимает кнопку "Заказать!". Менеджер подтверждает заявку на своей странице списка заказов, после чего заказ отправляется в производство.

### Менеджер

Менеджер заходит на сайт и попадает на главную страницу сайта. Он авторизуется в форме входа, после чего попадает в Dashboard, где он видит уведомления по заказам и заявкам на тест-драйв и кнопки перехода к его страницам:

- Список производителей (может добавить, изменить или удалить)
- Список марок автомобилей (может добавить, изменить или удалить)
- Список моделей автомобилей (может добавить, изменить или удалить)
- Список комплектаций автомобилей (может добавить, изменить или удалить)
- Список автомобилей в автосалоне (может добавить, изменить или удалить). Он меняет их статус.
- Список заказов (может создать в форме для заказа авто и менять их статус)
- Список заявок на тест-драйв (может создать, обработать онлайн-заявку и поменять статус)
- Список клиентов (может зарегистрировать, поменять данные, узнать какие у клиента были заказы)
- Форма для регистрации нового менеджера 

### Получение списка автомобилей по разным характеристикам
Клиент заходит на сайт и попадает на главную страницу сайта. Оттуда переходит в каталог, и в форме фильтрации регулирует нужные ему характеристики автомобилей. После этого в каталоге показываются соответствующие фильтрации предложения.

Менеджер заходит на сайт и попадает на главную страницу сайта. Оттуда переходит на страницу Входа в систему, заходит под своим именем, после чего переходит в Dashboard. Нажимает кнопку "список автомобилей", переходит на страницу списка автомобилей.

### Получение списка клиентов по характеристикам их заказов
Менеджер заходит на сайт и попадает на главную страницу сайта. Оттуда переходит на страницу Входа в систему, заходит под своим именем, после чего переходит в Dashboard. Нажимает кнопку "список заказов", переходит на страницу списка заказов. В фильтре указывает нужные ему характеристики, после чего получает соответствующие фильтрации заказы. В полученных заказах указаны Id клиентов.

### Оформление заказа, проверка и изменение статуса заказа
Менеджер заходит на сайт и попадает на главную страницу сайта. Оттуда переходит на страницу Входа в систему, заходит под своим именем, после чего переходит в Dashboard. Нажимает кнопку "список заказов", переходит на страницу списка заказов. В фильтре указывает нужные ему характеристики, после чего получает соответствующие фильтрации заказы. В полученных заказах проверяет статусы заказов, после чего он может их поменять. После этого менеджер нажимает кнопки сохранения изменений.

### Добавление и удаление клиента, чтение и редактирование данных о нем
Клиент заходит на сайт и попадает на главную страницу сайта. Оттуда он может попасть в форму входа/регистрации, после чего он вводит свою почту и пароль и входит в систему ИЛИ заполняет форму регистрации и регистрируется. В шапке сайта клиент нажимает "Личный кабинет", после чего он может в форме прочитать и изменить свои личные данные. Нажимает кнопку "Сохранить" после изменения.

Менеджер заходит на сайт и попадает на главную страницу сайта. Оттуда переходит на страницу Входа в систему, заходит под своим именем, после чего переходит в Dashboard. Менеджер нажимает кнопку "Список клиентов". Там он может читать и редактировать данные существующих клиентов. Менеджер может удалить клиентов, нажав на кнопку. В форме регистрации клиента на той же странице он может зарегистрировать нового клиента. 

### Добавление и удаление марки автомобилей или конкретного автомобиля, чтение и редактирование данных о них
Менеджер заходит на сайт и попадает на главную страницу сайта. Оттуда переходит на страницу Входа в систему, заходит под своим именем, после чего переходит в Dashboard. Менеджер нажимает кнопку "Список марок". Там он может читать и редактировать данные марок автомобилей. Менеджер может удалить марку, нажав на кнопку. В форме добавления марки на той же странице он может добавить новую марку. Аналогично со страницей списка автомобилей автосалона.


## Схема БД
![БД](db_er_diagram.png)

[Скрипт создания БД](../db/create_tables.sql)

[Скрипт инициализации БД](../db/insert_into_db.sql)

[Скрипт удаления таблиц из БД](../db/drop_tables.sql)